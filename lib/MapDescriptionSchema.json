{
  "$defs":
    {
      "ActionDescriptor":
        {
          "additionalProperties": false,
          "properties":
            {
              "name": { "type": "string" }
            },
          "required": [ "name" ],
          "type": "object"
        },
      "MapDescriptor":
        {
          "additionalProperties": false,
          "properties":
            {
              "cursor": { "format": "uri-relative", "type": "string" },
              "scale": { "type": "number" },
              "spots": { "items": { "$ref": "#/$defs/SpotDescriptor" }, "type": "array" },
              "textureFile": { "format": "uri-relative", "type": "string" },
              "version": { "pattern": "^[0-9]+\\.[0-9]+$", "type": "string" },
              "walkFile": { "format": "uri-relative", "type": "string" }
            },
          "required": [ "textureFile", "version", "walkFile" ],
          "type": "object"
        },
      "PopoverSpotOptions":
        {
          "additionalProperties": false,
          "properties":
            {
              "pointerRadius": { "minimum": 0, "type": "number" }
            },
          "type": "object"
        },
      "SpotDescriptor":
        {
          "additionalProperties": false,
          "properties":
            {
              "actions": { "items": { "$ref": "#/$defs/ActionDescriptor" }, "type": "array" },
              "code": { "maxLength": 7, "minLength": 7, "pattern": "^#[0-9a-f]{6}$", "type": "string" },
              "options": { "$ref": "#/$defs/SpotDescriptorOptions" }
            },
          "required": [ "actions", "code", "options" ],
          "type": "object"
        },
      "SpotDescriptorOptions":
        {
          "additionalProperties": false,
          "allOf":
            [
              {
                "if": { "properties": { "type": { "const": "popover" } } },
                "then": { "properties": { "value": { "$ref": "#/$defs/PopoverSpotOptions" } } }
              }
            ],
          "properties":
            {
              "type": { "enum": [ "popover" ], "type": "string" },
              "value": { }
            },
          "required": [ "value", "type" ],
          "type": "object"
        }
    },
  "$ref": "#/$defs/MapDescriptor",
  "$schema": "http://json-schema.org/draft-07/schema#"
}