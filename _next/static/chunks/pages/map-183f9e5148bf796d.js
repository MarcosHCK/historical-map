(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{3512:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return r(9275)}])},4870:e=>{e.exports={mapContainer:"Map_mapContainer__6p31l"}},5284:e=>{!function(){"use strict";var t={864:function(e){var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){var i,o,s;function a(r){e.removeListener(t,u),n(r)}function u(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}d(e,t,u,{once:!0}),"error"!==t&&(i=e,o=a,s={once:!0},"function"==typeof i.on&&d(i,"error",o,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,l=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function v(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function d(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else for(var l=u.length,c=h(u,l),r=0;r<l;++r)n(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return v(this,e,!0)},o.prototype.rawListeners=function(e){return v(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,n),s=!1}finally{s&&delete r[e]}return o.exports}n.ab="//",e.exports=n(864)}()},8868:()=>{},9275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MapPage:()=>D,default:()=>S});var n=r(7876),i=r(4232),o=r(3912),s=r(3562);let a=i["useId".toString()]||(()=>void 0);var u=r(6249),l=r(1609),c=r(9545),f=r(2290),v=r(2250),p=r(385),h=r(2853),d={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};let y={},m=(0,l.V)((e,{radius:t,color:r,variant:n,autoContrast:i})=>{let o=e.variantColorResolver({color:r||e.primaryColor,theme:e,variant:n||"light",autoContrast:i});return{root:{"--alert-radius":void 0===t?void 0:(0,u.nJ)(t),"--alert-bg":r||n?o.background:void 0,"--alert-color":o.color,"--alert-bd":r||n?o.border:void 0}}}),_=(0,p.P9)((e,t)=>{let r=(0,c.Y)("Alert",y,e),{classNames:u,className:l,style:p,styles:_,unstyled:g,vars:w,radius:b,color:L,title:x,children:j,id:E,icon:C,withCloseButton:O,onClose:P,closeButtonLabel:k,variant:A,autoContrast:N,...M}=r,R=(0,f.I)({name:"Alert",classes:d,props:r,className:l,style:p,classNames:u,styles:_,unstyled:g,vars:w,varsResolver:m}),D=function(e){let t=function(){let e=a();return e?`mantine-${e.replace(/:/g,"")}`:""}(),[r,n]=(0,i.useState)(t);return((0,o.o)(()=>{n((0,s.z)())},[]),"string"==typeof e)?e:"undefined"==typeof window?t:r}(E),S=x&&`${D}-title`||void 0,B=`${D}-body`;return(0,n.jsx)(v.a,{id:D,...R("root",{variant:A}),variant:A,ref:t,...M,role:"alert","aria-describedby":B,"aria-labelledby":S,children:(0,n.jsxs)("div",{...R("wrapper"),children:[C&&(0,n.jsx)("div",{...R("icon"),children:C}),(0,n.jsxs)("div",{...R("body"),children:[x&&(0,n.jsx)("div",{...R("title"),"data-with-close-button":O||void 0,children:(0,n.jsx)("span",{id:S,...R("label"),children:x})}),j&&(0,n.jsx)("div",{id:B,...R("message"),"data-variant":A,children:j})]}),O&&(0,n.jsx)(h.J,{...R("closeButton"),onClick:P,variant:"transparent",size:16,iconSize:16,"aria-label":k,unstyled:g})]})})});_.classes=d,_.displayName="@mantine/core/Alert",r(8868);var g=r(9021),w=r(3675),b=r(5284),L=r.n(b);class x{get value(){return this._value}set value(e){this._value=e,this._event.emit("set")}wait(e){return new Promise(t=>this._wait(e,t))}_wait(e,t){switch(e){case void 0:this._event.once("set",t);break;case this._value:t();break;default:this._event.once("set",()=>{e===this._value&&t()})}}constructor(e){this._event=new(L()),this._value=e}}var j=r(1198),E=r(3934),C=r(5882);class O{dispose(){this._map.stop(),this._map.remove(),this._ready.value=!1}_load(){this._map.addControl(new j.NavigationControl,"top-right"),this._map.addLayer(this._geoLayer),this._ready.value=!0}async _prepareGeoData(e){for(let e in this._geoData)await this._geoLayer.removeGeoreferenceAnnotationByUrl(e);this._geoData.clear(),this._geoData.add(e)}async setGeoData(e){await this._ready.wait(!0),await this._prepareGeoData(e),await this._geoLayer.addGeoreferenceAnnotationByUrl(e)}async setWalkData(e){await this._ready.wait(!0)}constructor(e){this._ready=new x(!1),this._map=new j.Map({attributionControl:{compact:!0,customAttribution:"Havana University (UH)"},container:e,style:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",zoom:1,maxPitch:0,preserveDrawingBuffer:!0}),this._geoData=new Set,this._geoLayer=new C.d,this._map.on("load",()=>this._load())}}var P=r(4870),k=r.n(P);let A=e=>{let{map:t,walk:r}=e,{ref:o}=function(e,t){let r=(0,i.useRef)(null),n=(0,E.h)(),o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=r.current=new O(o.current);return()=>e.dispose()},[]),(0,i.useEffect)(()=>{r.current.setGeoData(e).catch(e=>n.push(e))},[e,n]),(0,i.useEffect)(()=>{r.current.setWalkData(t).catch(e=>n.push(e))},[n,t]),(0,i.useMemo)(()=>({ref:o}),[o])}((0,w.vP)(t),(0,w.vP)(r));return(0,n.jsx)(g.B,{className:k().mapContainer,ref:o})};var N=r(9099),M=r(8220).Buffer;function R(){return(0,n.jsx)(_,{color:"red",children:"Bad use of map route"})}let D=()=>{let e=(0,N.useRouter)(),t=(0,i.useMemo)(()=>(function(e){let t,r;if(!(void 0===(t=e.map)||Array.isArray(t))&&(t=M.from(t,"base64").toString("utf8"),!(void 0===(r=e.walk)||Array.isArray(r))))return{map:t,walk:r=M.from(r,"base64").toString("utf8")}})(e.query),[e.query]);return void 0===t?(0,n.jsx)(R,{}):(0,n.jsx)(A,{...t})},S=D}},e=>{var t=t=>e(e.s=t);e.O(0,[841,368,652,392,636,593,792],()=>t(3512)),_N_E=e.O()}]);